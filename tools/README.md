# MiniMax 音色管理器

基于 Streamlit 的 MiniMax 音色管理工具，提供直观的 Web 界面来管理你的音色。

## 功能特性

### 📋 音色列表
- 查看所有克隆音色
- 显示音色状态（准备中/就绪/错误）
- 一键删除音色
- 自动刷新音色列表

### 🎤 测试音色
- 选择任意音色进行测试
- 自定义测试文本
- 调整音频参数（语速、音量、音调）
- 实时播放和下载生成的音频

### ➕ 添加音色
- 上传音频文件（支持 WAV、MP3、M4A、FLAC）
- 自定义音色ID
- 高级选项配置（降噪、音量标准化等）
- 实时状态反馈

### 📁 批量上传
- 同时上传多个音频文件
- 批量配置音色参数
- 自定义每个文件的音色ID和预览文本
- 支持从CSV文件导入配置
- 批量处理进度显示

## 安装和运行

### 方法一：使用启动脚本（推荐）

```bash
# 在项目根目录下运行
python tools/run_voice_manager.py
```

### 方法二：手动运行

```bash
# 1. 安装依赖
pip install streamlit>=1.28.0

# 2. 运行应用
streamlit run tools/voice_manager.py
```

### 方法三：使用 uv（如果项目使用 uv）

```bash
# 1. 安装依赖
uv add streamlit

# 2. 运行应用
uv run streamlit run tools/voice_manager.py
```

## 使用说明

### 1. 配置连接
1. 打开应用后，在左侧边栏输入你的 MiniMax API Key 和 Group ID
2. 点击"连接"按钮
3. 连接成功后即可使用所有功能

### 2. 查看音色列表
- 在"音色列表"标签页查看所有克隆音色
- 可以删除不需要的音色
- 点击"刷新音色列表"更新状态

### 3. 测试音色
1. 在"测试音色"标签页选择要测试的音色
2. 输入测试文本
3. 调整音频参数
4. 点击"生成测试音频"
5. 播放或下载生成的音频

### 4. 添加单个音色
1. 在"添加音色"标签页上传音频文件
2. 设置音色ID（必须符合格式要求）
3. 配置高级选项（可选）
4. 点击"开始克隆"
5. 等待处理完成

### 5. 批量上传音色
1. 在"批量上传"标签页选择多个音频文件
2. 设置基础音色ID或自定义每个文件的音色ID
3. 为每个文件设置预览文本（可选）
4. 可选择从CSV文件导入配置（参考 `batch_config_template.csv`）
5. 配置批量参数
6. 点击"开始批量克隆"
7. 查看处理进度和结果

## 音色ID格式要求

- 至少8位字符
- 必须以字母开头
- 必须包含字母和数字
- 示例：`voice001`、`myVoice123`、`testVoice456`

## 支持的音频格式

- **WAV** - 无损音频格式
- **MP3** - 有损压缩格式
- **M4A** - AAC编码格式
- **FLAC** - 无损压缩格式

## 音频参数说明

### 测试音频参数
- **语速**: 0.5-2.0，1.0为正常速度
- **音量**: 0-10，1.0为正常音量
- **音调**: -12到12，0为正常音调
- **情感**: 选择语音的情感表达（happy, sad, angry, fearful, disgusted, surprised, neutral）
- **模型**: 选择不同的TTS模型

### 克隆参数
- **降噪**: 是否启用音频降噪
- **音量标准化**: 是否标准化音量
- **文本验证精度**: 0-1，用于验证音色质量
- **模型**: 选择克隆使用的模型
- **预览文本**: 用于验证音色质量的文本（可选）

## CSV导入功能

### CSV文件格式
CSV文件应包含以下列：
- **文件名**: 音频文件的完整文件名（包括扩展名）
- **音色ID**: 对应的音色ID
- **预览文本**: 用于验证音色的文本（可选）

### 示例CSV文件
```csv
文件名,音色ID,预览文本
sample1.wav,voice001,你好，这是第一个测试音频。
sample2.mp3,voice002,Hello, this is the second test audio.
sample3.m4a,voice003,这是一个中文测试音频，用于验证音色质量。
```

### 使用步骤
1. 准备CSV文件，确保文件名与上传的音频文件完全匹配
2. 在批量上传页面选择音频文件
3. 点击"从CSV导入配置"上传CSV文件
4. 系统会自动填充音色ID和预览文本
5. 可以手动调整任何配置
6. 开始批量克隆

## 注意事项

1. **API限制**: 请确保你的API配额足够
2. **文件大小**: 建议音频文件不超过50MB
3. **处理时间**: 音色克隆通常需要1-5分钟
4. **网络连接**: 需要稳定的网络连接
5. **浏览器兼容**: 建议使用Chrome、Firefox或Edge
6. **CSV编码**: 确保CSV文件使用UTF-8编码

## 故障排除

### 连接失败
- 检查API Key和Group ID是否正确
- 确认网络连接正常
- 验证API配额是否充足

### 上传失败
- 检查文件格式是否支持
- 确认文件大小不超过限制
- 验证文件是否损坏

### 克隆失败
- 检查音色ID格式是否正确
- 确认音频文件质量良好
- 查看错误信息进行相应处理

## 开发说明

### 项目结构
```
tools/
├── voice_manager.py              # 主应用文件
├── requirements.txt              # 依赖文件
├── run_voice_manager.py          # 启动脚本
├── batch_config_template.csv     # CSV配置模板
└── README.md                     # 说明文档
```

### 技术栈
- **Streamlit**: Web界面框架
- **MiniMax Speech SDK**: 音色管理API
- **Python**: 后端逻辑

### 扩展功能
如需添加新功能，可以修改 `voice_manager.py` 文件：
- 添加新的标签页
- 扩展音色管理功能
- 优化用户界面
- 添加数据导出功能

## 许可证

本项目遵循与主项目相同的许可证。 